
<link href="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.8/index.global.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.8/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.8/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.8/index.global.min.js"></script>

<div id="month-calendar" style="min-height: 600px;"></div>
<script>
             fetch('https://www.hebcal.com/hebcal?cfg=json&i=on&year=2025&month=10&maj=on&min=on&nx=on&ss=on&mf=on&c=on&m=0&zip=29455')
    .then(response => response.json())
    .then(data => {
  console.log('Hebcal raw items:', data.items);
  const events = (data.items || [])
        .map(ev => {
          let title = ev.title;
          let start = ev.date;
          let classNames = [];
          if (ev.category === 'candles') {
            const d = new Date(ev.date);
            let hours = d.getHours();
            let minutes = d.getMinutes();
            let ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            let minutesStr = minutes < 10 ? '0' + minutes : minutes;
            let sundownTime = `${hours}:${minutesStr}${ampm}`;
            title = `SUNDOWN - ${sundownTime}`;
            classNames.push('bg-purple-600', 'border-purple-400');
          } else if (ev.category === 'havdalah') {
            classNames.push('bg-purple-600', 'border-purple-400');
          } else if (ev.yomtov) {
            classNames.push('bg-purple-300', 'border-purple-300');
          }
          // Add purple-600 bg for any event with 'erev' in the title
          if (title && title.toLowerCase().includes('erev')) {
            classNames.push('bg-purple-600');
          }
          return {
            title,
            start,
            allDay: true,
            classNames
          };
        });
      const calendar = new window.FullCalendar.Calendar(document.getElementById('month-calendar'), {
        initialView: 'dayGridMonth',
        events: events,
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: ''
        },
        eventClassNames: function(arg) {
          return arg.event.classNames;
        }
      });
      calendar.render();
    })
    .catch(() => {
      document.getElementById('month-calendar').innerHTML = '<div class="text-red-600 p-4">Calendar failed to load.</div>';
    });
</script>